{"ast":null,"code":"import _slicedToArray from\"/workspaces/TodoList/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from\"react\";import{createSearchParams,Link,useNavigate}from\"react-router-dom\";import{ReactComponent as Search}from\"../../assets/search.svg\";import useDate from\"../hooks/useDate\";import useSearchQuery from\"../hooks/useSearchQuery\";import useVisibility from\"../hooks/useVisibility\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ItemSearch=function ItemSearch(_ref){var _task$date;var task=_ref.task;var dateFormatted=useDate((_task$date=task.date)!==null&&_task$date!==void 0?_task$date:\"\");// Provide a default empty string if date is undefined\nreturn/*#__PURE__*/_jsx(\"li\",{className:\"py-2\",children:/*#__PURE__*/_jsxs(Link,{to:\"/task/\".concat(task.id),className:\"flex justify-between transition hover:text-rose-500 dark:hover:text-slate-200\",children:[/*#__PURE__*/_jsx(\"span\",{children:task.title}),/*#__PURE__*/_jsx(\"span\",{children:dateFormatted})]})},task.id);};var SearchField=function SearchField(){var navigate=useNavigate();var searchResultsRef=useRef(null);// Correct type for input element\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchInputValue=_useState2[0],setSearchInputValue=_useState2[1];var matchedTasks=useSearchQuery(searchInputValue);var tasks=matchedTasks.slice(0,4);var _useVisibility=useVisibility([searchResultsRef.current],function(){return setSearchInputValue(\"\");}),listResultsVisible=_useVisibility.elementIsVisible,showListResults=_useVisibility.showElement,closeListResults=_useVisibility.closeElement;var navigateToSearchResults=function navigateToSearchResults(){navigate({pathname:\"results\",search:createSearchParams({q:searchInputValue}).toString()});};useEffect(function(){if(searchInputValue.trim().length>0){showListResults();}else{closeListResults();}},[closeListResults,searchInputValue,showListResults]);return/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 col-span-3 row-start-2 md:pr-10\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"relative md:max-w-xs w-full\",autoComplete:\"off\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"search\",className:\"sr-only\",children:\"Search\"}),/*#__PURE__*/_jsx(\"input\",{type:\"search\",id:\"search\",placeholder:\"Search task\",ref:searchResultsRef// Correct type for input element\n,onKeyUp:function onKeyUp(_ref2){var currentTarget=_ref2.currentTarget;return setSearchInputValue(currentTarget.value);},className:\"inputStyles w-full\"}),/*#__PURE__*/_jsx(Search,{className:\"absolute w-4 sm:w-5 right-4 top-3.5 text-slate-400\"}),listResultsVisible&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute bg-slate-100 rounded-md w-full top-14 p-3 dark:bg-slate-800 z-10\",children:tasks.length?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"ul\",{children:tasks.map(function(task){return/*#__PURE__*/_jsx(ItemSearch,{task:task},task.id);})}),/*#__PURE__*/_jsxs(\"button\",{onClick:navigateToSearchResults,className:\"bg-rose-100 w-full p-2 rounded-md text-rose-600 dark:bg-slate-700/[.3] dark:text-slate-200\",children:[\"All results for \\\"\",searchInputValue,\"\\\"\"]})]}):/*#__PURE__*/_jsx(\"span\",{children:\"No tasks found\"})})]})});};export default SearchField;","map":{"version":3,"names":["React","useState","useEffect","useRef","createSearchParams","Link","useNavigate","ReactComponent","Search","useDate","useSearchQuery","useVisibility","ItemSearch","task","dateFormatted","date","id","title","SearchField","navigate","searchResultsRef","searchInputValue","setSearchInputValue","matchedTasks","tasks","slice","current","listResultsVisible","elementIsVisible","showListResults","showElement","closeListResults","closeElement","navigateToSearchResults","pathname","search","q","toString","trim","length","currentTarget","value","map"],"sources":["/workspaces/TodoList/src/components/TasksSection/SearchField.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { createSearchParams, Link, useNavigate } from \"react-router-dom\";\nimport { ReactComponent as Search } from \"../../assets/search.svg\";\nimport { Task } from \"../../interfaces\";\nimport useDate from \"../hooks/useDate\";\nimport useSearchQuery from \"../hooks/useSearchQuery\";\nimport useVisibility from \"../hooks/useVisibility\";\n\nconst ItemSearch: React.FC<{ task: Task }> = ({ task }) => {\n  const dateFormatted = useDate(task.date ?? \"\"); // Provide a default empty string if date is undefined\n\n  return (\n    <li key={task.id} className=\"py-2\">\n      <Link\n        to={`/task/${task.id}`}\n        className=\"flex justify-between transition hover:text-rose-500 dark:hover:text-slate-200\"\n      >\n        <span>{task.title}</span>\n        <span>{dateFormatted}</span>\n      </Link>\n    </li>\n  );\n};\n\nconst SearchField: React.FC = () => {\n  const navigate = useNavigate();\n  const searchResultsRef = useRef<HTMLInputElement>(null); // Correct type for input element\n  const [searchInputValue, setSearchInputValue] = useState<string>(\"\");\n\n  const matchedTasks = useSearchQuery(searchInputValue);\n  const tasks = matchedTasks.slice(0, 4);\n\n  const {\n    elementIsVisible: listResultsVisible,\n    showElement: showListResults,\n    closeElement: closeListResults,\n  } = useVisibility([searchResultsRef.current!], () => setSearchInputValue(\"\"));\n\n  const navigateToSearchResults = () => {\n    navigate({\n      pathname: \"results\",\n      search: createSearchParams({ q: searchInputValue }).toString(),\n    });\n  };\n\n  useEffect(() => {\n    if (searchInputValue.trim().length > 0) {\n      showListResults();\n    } else {\n      closeListResults();\n    }\n  }, [closeListResults, searchInputValue, showListResults]);\n\n  return (\n    <div className=\"flex-1 col-span-3 row-start-2 md:pr-10\">\n      <form className=\"relative md:max-w-xs w-full\" autoComplete=\"off\">\n        <label htmlFor=\"search\" className=\"sr-only\">Search</label>\n        <input\n          type=\"search\"\n          id=\"search\"\n          placeholder=\"Search task\"\n          ref={searchResultsRef} // Correct type for input element\n          onKeyUp={({ currentTarget }) => setSearchInputValue(currentTarget.value)}\n          className=\"inputStyles w-full\"\n        />\n        <Search className=\"absolute w-4 sm:w-5 right-4 top-3.5 text-slate-400\" />\n        {listResultsVisible && (\n          <div className=\"absolute bg-slate-100 rounded-md w-full top-14 p-3 dark:bg-slate-800 z-10\">\n            {tasks.length ? (\n              <>\n                <ul>\n                  {tasks.map((task) => (\n                    <ItemSearch key={task.id} task={task} />\n                  ))}\n                </ul>\n                <button\n                  onClick={navigateToSearchResults}\n                  className=\"bg-rose-100 w-full p-2 rounded-md text-rose-600 dark:bg-slate-700/[.3] dark:text-slate-200\"\n                >\n                  All results for \"{searchInputValue}\"\n                </button>\n              </>\n            ) : (\n              <span>No tasks found</span>\n            )}\n          </div>\n        )}\n      </form>\n    </div>\n  );\n};\n\nexport default SearchField;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}