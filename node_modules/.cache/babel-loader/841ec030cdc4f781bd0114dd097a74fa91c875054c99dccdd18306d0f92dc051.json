{"ast":null,"code":"var _jsxFileName = \"/home/jayourbae/ToDo-app/src/components/TasksSection/SearchField.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { createSearchParams, Link, useNavigate } from \"react-router-dom\";\nimport { ReactComponent as Search } from \"../../assets/search.svg\";\nimport useDate from \"../hooks/useDate\";\nimport useSearchQuery from \"../hooks/useSearchQuery\";\nimport useVisibility from \"../hooks/useVisibility\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ItemSearch = _ref => {\n  _s();\n  let {\n    task\n  } = _ref;\n  // Handle optional date; `useDate` should handle undefined values gracefully\n  const dateFormatted = task.date ? useDate(task.date) : \"No date\";\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    className: \"py-2\",\n    children: /*#__PURE__*/_jsxDEV(Link, {\n      to: `/task/${task.id}`,\n      className: \"flex justify-between transition hover:text-rose-500 dark:hover:text-slate-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: task.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: dateFormatted\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 5\n  }, this);\n};\n_s(ItemSearch, \"7RuHMJrKLZdC5RQHFLghGMbz5eI=\", false, function () {\n  return [useDate];\n});\n_c = ItemSearch;\nconst SearchField = () => {\n  _s2();\n  const navigate = useNavigate();\n\n  // Corrected ref type to HTMLInputElement\n  const searchResultsRef = useRef(null);\n  const [searchInputValue, setSearchInputValue] = useState(\"\");\n  const matchedTasks = useSearchQuery(searchInputValue);\n  const tasks = matchedTasks.slice(0, 4);\n  const {\n    elementIsVisible: listResultsVisible,\n    showElement: showListResults,\n    closeElement: closeListResults\n  } = useVisibility([searchResultsRef.current], () => setSearchInputValue(\"\"));\n  const navigateToSearchResults = () => {\n    navigate({\n      pathname: \"results\",\n      search: createSearchParams({\n        q: searchInputValue\n      }).toString()\n    });\n  };\n  useEffect(() => {\n    if (searchInputValue.trim().length > 0) {\n      showListResults();\n    } else {\n      closeListResults();\n    }\n  }, [closeListResults, searchInputValue, showListResults]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex-1 col-span-3 row-start-2 md:pr-10\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"relative md:max-w-xs w-full\",\n      autoComplete: \"off\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"search\",\n        className: \"sr-only\",\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"search\",\n        id: \"search\",\n        placeholder: \"Search task\",\n        ref: searchResultsRef,\n        onChange: _ref2 => {\n          let {\n            currentTarget\n          } = _ref2;\n          setSearchInputValue(currentTarget.value);\n        },\n        className: \"inputStyles w-full\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Search, {\n        className: \"absolute w-4 sm:w-5 right-4 top-3.5 text-slate-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), listResultsVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bg-slate-100 rounded-md w-full top-14 p-3 dark:bg-slate-800 z-10\",\n        children: tasks.length ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n            children: tasks.map(task => /*#__PURE__*/_jsxDEV(ItemSearch, {\n              task: task\n            }, task.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: navigateToSearchResults,\n            className: \"bg-rose-100 w-full p-2 rounded-md text-rose-600 dark:bg-slate-700/[.3] dark:text-slate-200\",\n            \"aria-label\": `All results for \"${searchInputValue}\"`,\n            children: [\"All results for \\\"\", searchInputValue, \"\\\"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"No tasks found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s2(SearchField, \"qR88Qlx5iLYbPzCzvfC3sP3YPuY=\", false, function () {\n  return [useNavigate, useSearchQuery, useVisibility];\n});\n_c2 = SearchField;\nexport default SearchField;\nvar _c, _c2;\n$RefreshReg$(_c, \"ItemSearch\");\n$RefreshReg$(_c2, \"SearchField\");","map":{"version":3,"names":["React","useState","useEffect","useRef","createSearchParams","Link","useNavigate","ReactComponent","Search","useDate","useSearchQuery","useVisibility","ItemSearch","task","dateFormatted","date","id","title","SearchField","navigate","searchResultsRef","searchInputValue","setSearchInputValue","matchedTasks","tasks","slice","elementIsVisible","listResultsVisible","showElement","showListResults","closeElement","closeListResults","current","navigateToSearchResults","pathname","search","q","toString","trim","length","currentTarget","value","map"],"sources":["/home/jayourbae/ToDo-app/src/components/TasksSection/SearchField.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { createSearchParams, Link, useNavigate } from \"react-router-dom\";\nimport { ReactComponent as Search } from \"../../assets/search.svg\";\nimport { Task } from \"../../interfaces\";\nimport useDate from \"../hooks/useDate\";\nimport useSearchQuery from \"../hooks/useSearchQuery\";\nimport useVisibility from \"../hooks/useVisibility\";\n\nconst ItemSearch: React.FC<{ task: Task }> = ({ task }) => {\n  // Handle optional date; `useDate` should handle undefined values gracefully\n  const dateFormatted = task.date ? useDate(task.date) : \"No date\";\n\n  return (\n    <li className=\"py-2\">\n      <Link\n        to={`/task/${task.id}`}\n        className=\"flex justify-between transition hover:text-rose-500 dark:hover:text-slate-200\"\n      >\n        <span>{task.title}</span>\n        <span>{dateFormatted}</span>\n      </Link>\n    </li>\n  );\n};\n\nconst SearchField: React.FC = () => {\n  const navigate = useNavigate();\n\n  // Corrected ref type to HTMLInputElement\n  const searchResultsRef = useRef<HTMLInputElement>(null);\n  const [searchInputValue, setSearchInputValue] = useState<string>(\"\");\n\n  const matchedTasks = useSearchQuery(searchInputValue);\n  const tasks = matchedTasks.slice(0, 4);\n\n  const {\n    elementIsVisible: listResultsVisible,\n    showElement: showListResults,\n    closeElement: closeListResults,\n  } = useVisibility([searchResultsRef.current!], () => setSearchInputValue(\"\"));\n\n  const navigateToSearchResults = () => {\n    navigate({\n      pathname: \"results\",\n      search: createSearchParams({\n        q: searchInputValue,\n      }).toString(),\n    });\n  };\n\n  useEffect(() => {\n    if (searchInputValue.trim().length > 0) {\n      showListResults();\n    } else {\n      closeListResults();\n    }\n  }, [closeListResults, searchInputValue, showListResults]);\n\n  return (\n    <div className=\"flex-1 col-span-3 row-start-2 md:pr-10\">\n      <form className=\"relative md:max-w-xs w-full\" autoComplete=\"off\">\n        <label htmlFor=\"search\" className=\"sr-only\">Search</label>\n        <input\n          type=\"search\"\n          id=\"search\"\n          placeholder=\"Search task\"\n          ref={searchResultsRef}\n          onChange={({ currentTarget }) => {\n            setSearchInputValue(currentTarget.value);\n          }}\n          className=\"inputStyles w-full\"\n        />\n        <Search className=\"absolute w-4 sm:w-5 right-4 top-3.5 text-slate-400\" />\n        {listResultsVisible && (\n          <div className=\"absolute bg-slate-100 rounded-md w-full top-14 p-3 dark:bg-slate-800 z-10\">\n            {tasks.length ? (\n              <>\n                <ul>\n                  {tasks.map((task) => (\n                    <ItemSearch key={task.id} task={task} />\n                  ))}\n                </ul>\n                <button\n                  onClick={navigateToSearchResults}\n                  className=\"bg-rose-100 w-full p-2 rounded-md text-rose-600 dark:bg-slate-700/[.3] dark:text-slate-200\"\n                  aria-label={`All results for \"${searchInputValue}\"`}\n                >\n                  All results for \"{searchInputValue}\"\n                </button>\n              </>\n            ) : (\n              <span>No tasks found</span>\n            )}\n          </div>\n        )}\n      </form>\n    </div>\n  );\n};\n\nexport default SearchField;\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,kBAAkB,EAAEC,IAAI,EAAEC,WAAW,QAAQ,kBAAkB;AACxE,SAASC,cAAc,IAAIC,MAAM,QAAQ,yBAAyB;AAElE,OAAOC,OAAO,MAAM,kBAAkB;AACtC,OAAOC,cAAc,MAAM,yBAAyB;AACpD,OAAOC,aAAa,MAAM,wBAAwB;AAAC;AAAA;AAEnD,MAAMC,UAAoC,GAAG,QAAc;EAAA;EAAA,IAAb;IAAEC;EAAK,CAAC;EACpD;EACA,MAAMC,aAAa,GAAGD,IAAI,CAACE,IAAI,GAAGN,OAAO,CAACI,IAAI,CAACE,IAAI,CAAC,GAAG,SAAS;EAEhE,oBACE;IAAI,SAAS,EAAC,MAAM;IAAA,uBAClB,QAAC,IAAI;MACH,EAAE,EAAG,SAAQF,IAAI,CAACG,EAAG,EAAE;MACvB,SAAS,EAAC,+EAA+E;MAAA,wBAEzF;QAAA,UAAOH,IAAI,CAACI;MAAK;QAAA;QAAA;QAAA;MAAA,QAAQ,eACzB;QAAA,UAAOH;MAAa;QAAA;QAAA;QAAA;MAAA,QAAQ;IAAA;MAAA;MAAA;MAAA;IAAA;EACvB;IAAA;IAAA;IAAA;EAAA,QACJ;AAET,CAAC;AAAC,GAfIF,UAAoC;EAAA,QAENH,OAAO;AAAA;AAAA,KAFrCG,UAAoC;AAiB1C,MAAMM,WAAqB,GAAG,MAAM;EAAA;EAClC,MAAMC,QAAQ,GAAGb,WAAW,EAAE;;EAE9B;EACA,MAAMc,gBAAgB,GAAGjB,MAAM,CAAmB,IAAI,CAAC;EACvD,MAAM,CAACkB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGrB,QAAQ,CAAS,EAAE,CAAC;EAEpE,MAAMsB,YAAY,GAAGb,cAAc,CAACW,gBAAgB,CAAC;EACrD,MAAMG,KAAK,GAAGD,YAAY,CAACE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EAEtC,MAAM;IACJC,gBAAgB,EAAEC,kBAAkB;IACpCC,WAAW,EAAEC,eAAe;IAC5BC,YAAY,EAAEC;EAChB,CAAC,GAAGpB,aAAa,CAAC,CAACS,gBAAgB,CAACY,OAAO,CAAE,EAAE,MAAMV,mBAAmB,CAAC,EAAE,CAAC,CAAC;EAE7E,MAAMW,uBAAuB,GAAG,MAAM;IACpCd,QAAQ,CAAC;MACPe,QAAQ,EAAE,SAAS;MACnBC,MAAM,EAAE/B,kBAAkB,CAAC;QACzBgC,CAAC,EAAEf;MACL,CAAC,CAAC,CAACgB,QAAQ;IACb,CAAC,CAAC;EACJ,CAAC;EAEDnC,SAAS,CAAC,MAAM;IACd,IAAImB,gBAAgB,CAACiB,IAAI,EAAE,CAACC,MAAM,GAAG,CAAC,EAAE;MACtCV,eAAe,EAAE;IACnB,CAAC,MAAM;MACLE,gBAAgB,EAAE;IACpB;EACF,CAAC,EAAE,CAACA,gBAAgB,EAAEV,gBAAgB,EAAEQ,eAAe,CAAC,CAAC;EAEzD,oBACE;IAAK,SAAS,EAAC,wCAAwC;IAAA,uBACrD;MAAM,SAAS,EAAC,6BAA6B;MAAC,YAAY,EAAC,KAAK;MAAA,wBAC9D;QAAO,OAAO,EAAC,QAAQ;QAAC,SAAS,EAAC,SAAS;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAe,eAC1D;QACE,IAAI,EAAC,QAAQ;QACb,EAAE,EAAC,QAAQ;QACX,WAAW,EAAC,aAAa;QACzB,GAAG,EAAET,gBAAiB;QACtB,QAAQ,EAAE,SAAuB;UAAA,IAAtB;YAAEoB;UAAc,CAAC;UAC1BlB,mBAAmB,CAACkB,aAAa,CAACC,KAAK,CAAC;QAC1C,CAAE;QACF,SAAS,EAAC;MAAoB;QAAA;QAAA;QAAA;MAAA,QAC9B,eACF,QAAC,MAAM;QAAC,SAAS,EAAC;MAAoD;QAAA;QAAA;QAAA;MAAA,QAAG,EACxEd,kBAAkB,iBACjB;QAAK,SAAS,EAAC,2EAA2E;QAAA,UACvFH,KAAK,CAACe,MAAM,gBACX;UAAA,wBACE;YAAA,UACGf,KAAK,CAACkB,GAAG,CAAE7B,IAAI,iBACd,QAAC,UAAU;cAAe,IAAI,EAAEA;YAAK,GAApBA,IAAI,CAACG,EAAE;cAAA;cAAA;cAAA;YAAA,QACzB;UAAC;YAAA;YAAA;YAAA;UAAA,QACC,eACL;YACE,OAAO,EAAEiB,uBAAwB;YACjC,SAAS,EAAC,4FAA4F;YACtG,cAAa,oBAAmBZ,gBAAiB,GAAG;YAAA,iCAElCA,gBAAgB;UAAA;YAAA;YAAA;YAAA;UAAA,QAC3B;QAAA,gBACR,gBAEH;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MACD;QAAA;QAAA;QAAA;MAAA,QAEJ;IAAA;MAAA;MAAA;MAAA;IAAA;EACI;IAAA;IAAA;IAAA;EAAA,QACH;AAEV,CAAC;AAAC,IAzEIH,WAAqB;EAAA,QACRZ,WAAW,EAMPI,cAAc,EAO/BC,aAAa;AAAA;AAAA,MAdbO,WAAqB;AA2E3B,eAAeA,WAAW;AAAC;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}